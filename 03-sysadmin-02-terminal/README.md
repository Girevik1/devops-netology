**1. Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа; опишите ход своих мыслей, если считаете 
что она могла бы быть другого типа.**<br />
<em>Решение:<em><br />
>***Команда cd - встроена в bash, она работает внутри сессии терминала.
> Логичнее менять указатель на текущую дерикторию встроеной функцией. 
Если пользоваться отдельным исполняемым файлом в системе, например создадать скрипт и назвать его CD,
> то он будет работать со своим окружением и менять текущий каталог внутри своего окружения,
 а на вызвовший shell влиять не будет. (Это означает, что сценарий Bash выполняется в отдельной независимой оболочке, 
> у него другой PID оболочки)<br />
Теоретически можно сделать CD внешней программой, но после смены деректории необходимо вызвать bash из этого (нового каталога), 
> но тогда мы получим новый shell.
И выходя из сесии придется выходить, опять же, из всех сессий, которые создали при каждом вызове внешней CD.***<br />

**2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l? man grep поможет в ответе на этот вопрос.
Ознакомьтесь с документом о других подобных некорректных вариантах использования pipe.**<br />
<em>Решение:<em><br />
>***test_bash.sh<br />
>\#!/usr/bin/bash<br /><br />
if [[ -d /tmp ]];<br />
then<br />
test<br />
else<br />
no test<br />
no test<br />
no<br />
fi<br />
>art@art 03-sysadmin-02-terminal$ grep 'no test' test_bash.sh | wc -l<br />
2<br />
art@art 03-sysadmin-02-terminal$ grep 'no test' test_bash.sh -c<br />
2<br />***

**3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?**<br />
<em>Решение<em><br />
>***На виртуальной машине  - это systemd:<br />
vagrant@vagrant:~$ pstree -p<br />
systemd(1)─┬─VBoxService(892)─┬─{VBoxService}(893)<br />
           |                  ├─{VBoxService}(894)..<br />
           │                  ├─{VBoxService}(895)<br />
           │                  ├─{VBoxService}(896)<br />
           │                  ├─{VBoxService}(897)<br />
           │                  ├─{VBoxService}(898)<br />
           │                  ├─{VBoxService}(899)<br />
           │                  └─{VBoxService}(900)<br />
           ├─accounts-daemon(629)─┬─{accounts-daemon}(632)<br />
           │                      └─{accounts-daemon}(682)<br />***

>***На хост. машине - это systemd:<br />
vagrant@vagrant:~$ pstree -p<br />
systemd(1)─┬─ModemManager(966)─┬─{ModemManager}(988)<br />
           │                   └─{ModemManager}(991)<br />
           ├─NetworkManager(838)─┬─{NetworkManager}(945)<br />
           │                     └─{NetworkManager}(955)<br />
           ├─accounts-daemon(829)─┬─{accounts-daemon}(842)<br />
           │                      └─{accounts-daemon}(949)<br />
<br />***

**4.Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?**<br />
<em>Решение:<em><br />
>***запускал из /dev/pts/4<br />
> art@art ~$ ls -l /root 2>/dev/pts/6<br />
> в другом терминале вывело:<br />
> art@art 03-sysadmin-02-terminal$ ls: невозможно открыть каталог '/root': Отказано в доступе***

**5.Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.**<br />
<em>Решение:<em><br />
>***art@art 03-sysadmin-02-terminal$ cat test_bash.sh***<br />
\#!/usr/bin/bash<br /><br />
if [[ -d /tmp ]];<br />
then<br />
test<br />
else<br />
no test<br />
no test<br />
no<br />
fi<br /><br />
***art@art 03-sysadmin-02-terminal$ cat < test_bash.sh > test_bash2.sh***<br />
>***art@art 03-sysadmin-02-terminal$ cat test_bash2.sh***<br />
> \#!/usr/bin/bash<br /><br />
if [[ -d /tmp ]];<br />
then<br />
test<br />
else<br />
no test<br />
no test<br />
no<br />
fi<br /><br />

**6.Получится ли находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? 
Сможете ли вы наблюдать выводимые данные?**<br />
<em>Решение:<em><br />
>***art@art 03-sysadmin-02-terminal$ tty<br />
/dev/pts/6 <br /><br />
>art@art 03-sysadmin-02-terminal$ echo Test from pts6 to tty6 > /dev/tty6<br />
Но наблюдать в графическом режиме не получиться, нужно переключиться в контекст TTY (Ctrl-Alt-F3 в моем случае)***

**7.Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? 
Почему так происходит?**<br />
<em>Решение:<em><br />
>***bash 5>&1 - Создаст дескриптор с 5 и перенаправит его в stdout<br />
echo netology > /proc/$$/fd/5 - выведет в дескриптор "5", который был перенаправлен в stdout<br />
если запустить echo netology > /proc/$$/fd/5 в новой сесии, получим ошибку, так как такого дескриптора нет на данный
момент в текущей(новой) сесии<br />***<br />
vagrant@vagrant:~$ echo netology > /proc/$$/fd/5<br />
-bash: /proc/1091/fd/5: No such file or directory<br />
vagrant@vagrant:~$ bash 5>&1<br />
vagrant@vagrant:~$ echo netology > /proc/$$/fd/5<br />
netology<br />
vagrant@vagrant:~$<br />

**8.Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение
stdout на pty? Напоминаем: по умолчанию через pipe передается только stdout команды слева от | на stdin команды справа. 
Это можно сделать, поменяв стандартные потоки местами через промежуточный новый дескриптор, который вы научились создавать 
в предыдущем вопросе.**<br />
<em>Решение:<em><br />
>***vagrant@vagrant:~$ ls -l /root 9>&2 2>&1 1>&9 | grep denied -c***<br />
1<br />
9>&2 - новый дескриптор перенаправили в stderr<br />
2>&1 - stderr перенаправили в stdout<br />
1>&9 - stdout - перенаправили в в новый дескриптор<br />

**9.Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?**<br />
<em>Решение:<em><br />
>***Будут выведены переменные окружения:<br />
можно получить тоже самое (только с разделением по переменным по строкам):<br />
printenv<br />
env***<br />

**10.Используя man, опишите что доступно по адресам /proc/<PID>/cmdline, /proc/<PID>/exe.**<br />
<em>Решение:<em><br />
>***/proc/<PID>/cmdline*** - полный путь до исполняемого файла процесса [PID]  (строка 172)<br />
***/proc/<PID>/exe*** - содержит ссылку до файла запущенного для процесса [PID],<br />
cat выведет содержимое запущенного файла,запуск этого файла,  запустит еще одну копию самого файла  (строка 212)<br />

**11.Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo.**<br />
<em>Решение:<em><br />
>***vagrant@vagrant:~$ grep sse /proc/cpuinfo***<br />SSE 4.1<br />

**12.При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. <br />
Это можно подтвердить командой tty, которая упоминалась в лекции 3.2.<br />Однако:<br /><br />
vagrant@netology1:~$ ssh localhost 'tty'<br />
not a tty<br /><br />
Почитайте, почему так происходит, и как изменить поведение.**<br />
<em>Решение:<em><br />
>***При подключении ожидается пользователь, а не другой процесс и нет локального tty в данный момент. <br />
Для запуска можно добавить -t - и команда исполнится c принудительным созданием псевдотерминала***<br />

**13.Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это,<br /> 
воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии.**<br />
<em>Решение:<em><br />
>***При первых запусках ругался на права, 10-patrace.conf
после установки заначения  kernel.yama.ptrace_scope = 0
после чего процесс был перехвачен в screen, и продолжил работу после закрытия терминала. 
единственное в pstree процесс не отображался, точнее оботражался в виде процесса reptyr. Не сразу сообразил что это то, 
>что нужно.***<br />

**14.sudo echo string > /root/new_file не даст выполнить перенаправление под обычным пользователем,<br />
так как перенаправлением занимается процесс shell'а, который запущен без sudo под вашим пользователем.<br />
Для решения данной проблемы можно использовать конструкцию echo string | sudo tee /root/new_file.<br />
Узнайте что делает команда tee и почему в отличие от sudo echo команда с sudo tee будет работать.**<br />
<em>Решение:<em><br />
>***Команда tee делает вывод одновременно и в файл - указаный в качестве параметра, и в stdout.<br /> 
В данном примере команда получает вывод из stdin, перенаправленный через pipe от stdout команды echo
и так как команда запущена от sudo , соотвественно имеет права на запись в файл.***<br />